# CLAUDE.md - 개발 규칙

## 개발 원칙

### 1. YAGNI 원칙 준수
- 지금 당장 필요한 기능만 구현
- 지시받은 기능만 구현, 요청하지 않은 기능 **절대 금지**
- "나중에 필요할 것 같은" 코드 미리 작성 금지
- 확장성, 유연성 미리 고려 금지 (필요할 때 추가)
- 사용하지 않는 파라미터, 옵션, 분기 금지

### 2. 주석 정책
- **docstring**: 모든 함수/클래스에 필수, 단 한 줄로 핵심만
- **코드 내 주석**: "왜"를 설명할 때만 작성 (코드가 "무엇"을 하는지는 코드 자체로 표현)
- 자명한 코드에 주석 금지 (예: `# API 호출` 같은 뻔한 주석)
- 같은 내용 반복 설명 금지
- 주석은 **영어**로 작성 (한국어 인코딩 이슈 방지)

### 3. 무제한 리소스 활용
- 토큰 사용에 제약 없음 (사용자 보증)
- MCP 도구 최대한 활용
- 코드 분석 시 일부만 읽지 않고 **전체를 읽음**

### 4. 실제 동작 코드만 작성
- 모킹 금지
- 주석 처리된 테스트 코드 금지
- `print` 함수를 이용한 테스트성 출력 **절대 금지**

### 5. 최신 기술 리서치 우선
- AI 등 기술적 트렌드가 빠른 주제 코딩 시
- MCP 도구로 최신 모델, 기능, 방법론 리서치 후 작업

### 6. 철저한 로깅
- 로깅을 철저히 구현
- 코드 수정 시 로그를 참고하여 수정

### 7. 테스트 후 구현
- 기능을 실제 작업 코드에 추가할 때
- 해당 기능에 대한 테스트를 먼저 진행
- 검증된 방법으로 기능 구현

### 8. 명명 규칙
- 함수명, 클래스명, 코드파일 이름은 **간결하면서 핵심**이 담기게

### 9. 계획서 정책
- 코드 하드카피 첨부 금지
- **'무엇을'**, **'어떻게'**, **'왜'**를 담는 데 집중
- 모든 개발 및 구현 과정은 계획서 작성 후 이 문서를 준수하여 진행
- 사용자와 상호작용하며 추가된 기능이나 수정 부분은 **반드시 계획서에 업데이트**
- 실제 프로젝트 진행과 동기화

### 10. 에러 핸들링 정책
- 요청하지 않은 에러 핸들링 **금지**
- 예외 상황에는 **에러 반환만** 원칙

### 11. 설명 방식
- 아스키아트, 도표 사용 **금지** (터미널에서 깨져 보임)
- 모든 설명은 **말로 쉽게** 풀어서 작성
- 코드는 **전문가 수준**으로, 설명은 **초보 개발자도 이해 가능**하게
- 사용자와 대화는 한국어

### 12. README 수정 정책
- README 파일 **직접 수정 금지**
- 수정이 필요한 경우 사용자에게 **제안 형식**으로 물어볼 것

---

## 프로젝트 맥락

### 연구 목적
- 포용적 주민참여를 위한 LLM 다중 에이전트 시뮬레이션
- 20명 에이전트가 3라운드 토의 진행

### 핵심 설계
- 에이전트는 **입장(만족/불만족)을 미리 받지 않음**
- 인구통계학적 페르소나만 부여 (나이, 성별, 거주기간, 소유형태 등)
- 토의하면서 **스스로 입장 형성** (이게 연구의 핵심)

### 폴더 구조
```
llm_api/       # LLM 래퍼 (gemini, chatgpt, claude, kimi, exaone)
agent_api/     # 에이전트 시스템 (memory, prompt_builder, agent)
debate/        # 토의 진행 로직 (예정)
```

### 작업 스타일
- 파일 하나씩 작성 → 사용자 확인 → 다음 진행
- 기존 코드(old 폴더 등) 있으면 그거 참고
- 모델명 등 임의로 변경 금지
